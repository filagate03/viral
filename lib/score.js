export function defineScore(v){const vpd=v.views_per_day||0;const velocity=Math.min(40,Math.log10(vpd+1)*20);const engagement=Math.min(20,(v.like_count||0)/1e3*10+(v.comment_count||0)/1e3*20+(v.share_count||0)/1e3*10);const freshness=Math.max(0,Math.min(20,20-(Math.max(1,v.age_days)/30)*20));const author_penalty=-Math.min(10,Math.log10(Math.max(1,v.channel_subscribers||1))*5);const virality=Math.max(0,Math.min(100,velocity+engagement+freshness+author_penalty));return{virality_score:Math.round(virality),breakdown:{velocity:+velocity.toFixed(2),engagement:+engagement.toFixed(2),freshness:+freshness.toFixed(2),author_penalty:+author_penalty.toFixed(2)}};}